% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/pretest.R
\name{pretest}
\alias{pretest}
\alias{tabulate_metacheckable}
\alias{is_metacheckable}
\alias{assert_metacheckable}
\alias{report_metacheckable}
\alias{is_in_limit}
\alias{is_doi_cr_md}
\alias{is_doi_cr_type}
\title{Pretest acceptable DOIs}
\usage{
tabulate_metacheckable(x, ...)

is_metacheckable(x, ...)

assert_metacheckable(x, ...)

report_metacheckable(x, lang = mc_langs, ...)

is_in_limit(x, limit = 1000L)

is_doi_cr_md(x)

is_doi_cr_type(x, type = types_allowed)
}
\arguments{
\item{x}{A vector created by, or convertable to \code{\link[biblids:doi]{doi()}}.}

\item{...}{Additional arguments passed to the predicate functions.}

\item{lang}{Character scalar giving the anguage of the report.
\emph{Not} reactive as in \code{\link[=mcControlsServer]{mcControlsServer()}}.}

\item{limit}{Scalar integer, giving the number of DOIs to be submitted to the metacheck.}

\item{type}{Character scalar, must be one of the types from \code{\link[rcrossref:cr_types]{rcrossref::cr_types()}}.}
}
\value{
A tibble with one column for each of the predicate results.
\code{TRUE} always means that a DOI passes a criterion.

Tested in order:
\enumerate{
\item \code{not_na} following \code{\link[biblids:doi]{biblids::doi()}}.
\item \code{unique}
\code{FALSE} for every 2nd and later repetition of a DOI.
DOIs are compared using \code{\link[biblids:doi]{biblids::doi()}} logic.
\item \code{within_limits}
whether remaining DOIs are within the package limit for requests.
\item \code{doi_org_found}
whether remaining DOIs are found on DOI.org,
using \code{\link[biblids:doi_api]{biblids::is_doi_found()}}.
\item \code{from_cr}
whether remaining DOIs have been deposited by the Crossref
registration agency (per doi.org).
\item \code{cr_md}
whether remaining DOIs have metadata on Crossref.
}

\code{NA} can indicate that the test:
\itemize{
\item was not applicable, because a previous predicate was \code{FALSE}
}
}
\description{
Pretest acceptable DOIs
}
\details{
Before even checking what metadata has been deposited for a DOI,
a DOI has to pass a number of criteria to be eligible for metacheck.

The below criteria are assumed to be transitive but asymmetric
in the order given.
For example, if a DOI is not found on DOI.org,
it is assumed that it also \emph{cannot} be known to crossref and all later
predicates are also assumed to be \code{NA}.
This must necessarily be the case for, say, syntactically invalid DOIs,
but is more of an assumption when it comes to the consistency between
different data sources (say, DOI.org and Crossref).
}
\section{Related Functions and Methods}{
\subsection{Functions}{
\itemize{
\item \code{tabulate_metacheckable}: Tabulate results
}
\itemize{
\item \code{is_metacheckable}: Are all predicates \code{TRUE}?
}
\itemize{
\item \code{assert_metacheckable}: Assert metacheckability
}
\itemize{
\item \code{report_metacheckable}: Report summary in markdown
}
\itemize{
\item \code{is_in_limit}: Is the DOI in the limit?
}
\itemize{
\item \code{is_doi_cr_md}: Is there metadata for the DOI on Crossref?
}
\itemize{
\item \code{is_doi_cr_type}: Is the DOI a type (per Crossref)?
}}}

\seealso{
Other import: 
\code{\link{cr_works2}()},
\code{\link{get_cr_md}()}
}
\concept{import}
